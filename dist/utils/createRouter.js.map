{"version":3,"sources":["../../src/utils/createRouter.ts"],"names":["express","createRouter","routes","router","Router","forEach","route","method","toLowerCase","path","pre","createHandler","handler","req","res","console","log","result","e","status","json","name","message","stack","process","env","NODE_ENV"],"mappings":"AAAA,OAAOA,OAAP,MAAmD,SAAnD;AASA,OAAO,SAASC,YAAT,CAAsBC,MAAtB,EAA+C;AACpD,QAAMC,MAAc,GAAGH,OAAO,CAACI,MAAR,EAAvB;AACAF,EAAAA,MAAM,CAACG,OAAP,CAAgBC,KAAD,IAAW;AACxB,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAaC,WAAb,EAAf;AACAL,IAAAA,MAAM,CAACI,MAAD,CAAN,CAAeD,KAAK,CAACG,IAArB,EAA2B,GAAG,CAAC,IAAGH,KAAK,CAACI,GAAN,IAAa,EAAhB,CAAD,EAAqBC,aAAa,CAACL,KAAD,CAAlC,CAA9B;AACD,GAHD;AAIA,SAAOH,MAAP;AACD;AAED,OAAO,SAASQ,aAAT,CAAuB;AAC5BC,EAAAA;AAD4B,CAAvB,EAIW;AAChB,SAAO,OAAOC,GAAP,EAAqBC,GAArB,KAAuC;AAC5C,QAAI;AACFC,MAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ;AACA,YAAMC,MAAM,GAAG,MAAML,OAAO,CAACC,GAAD,CAA5B;AAECI,MAAAA,MAAM;AACR,KALD,CAKE,OAAOC,CAAP,EAAe;AACf,aAAOJ,GAAG,CAACK,MAAJ,CAAWD,CAAC,CAACC,MAAF,IAAY,GAAvB,EAA4BC,IAA5B,CAAiC;AACtCC,QAAAA,IAAI,EAAEH,CAAC,CAACG,IAAF,IAAU,gBADsB;AAEtCC,QAAAA,OAAO,EAAEJ,CAAC,CAACI,OAF2B;AAGtCH,QAAAA,MAAM,EAAED,CAAC,CAACC,MAAF,IAAY,GAHkB;AAItCI,QAAAA,KAAK,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCR,CAAC,CAACK,KAA1C,GAAkD;AAJnB,OAAjC,CAAP;AAMD;AACF,GAdD;AAeD","sourcesContent":["import express, { Request, Response, Router } from 'express';\r\nexport interface RoutesOptions {\r\n  path: string;\r\n  method: string;\r\n  pre?: Function[];\r\n  handler: Function; // temporary fixed with rule \"@typescript-eslint/ban-types\":\"off\" in eslintrc.json :/\r\n  responseStatus?: number;\r\n}\r\n\r\nexport function createRouter(routes: RoutesOptions[]) {\r\n  const router: Router = express.Router();\r\n  routes.forEach((route) => {\r\n    const method = route.method.toLowerCase();\r\n    router[method](route.path, ...[...route.pre || [], createHandler(route)]);\r\n  });\r\n  return router;\r\n}\r\n\r\nexport function createHandler({\r\n  handler,\r\n\r\n  // responseStatus = 200\r\n}: RoutesOptions) {\r\n  return async (req: Request, res: Response) => {\r\n    try {\r\n      console.log('create handler ==> try catch block')\r\n      const result = await handler(req);\r\n      // res.status(responseStatus).json(result);\r\n       result\r\n    } catch (e: any) {\r\n      return res.status(e.status || 500).json({\r\n        name: e.name || 'INTERNAL_ERROR',\r\n        message: e.message,\r\n        status: e.status || 500,\r\n        stack: process.env.NODE_ENV !== 'production' ? e.stack : null\r\n      });\r\n    }\r\n  };\r\n}\r\n"],"file":"createRouter.js"}