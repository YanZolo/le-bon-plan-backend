{"version":3,"sources":["../../../src/controllers/admin/adminController.spec.ts"],"names":["UserModel","AdminController","jest","describe","it","expect","beforeEach","mock","findById","mockClear","adminController","save","fn","_id","username","email","password","mockImplementation","result","addUser","body","toHaveBeenCalledWith","toHaveBeenCalled","toHaveReturned","toEqual"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,2BAAtB;AAIA,SAASC,eAAT,QAAgC,sBAAhC;AAGA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,EAAzB,EAA6BC,MAA7B,EAAqCC,UAArC,QAAuD,eAAvD;AAGAJ,IAAI,CAACK,IAAL,CAAU,2BAAV;AAGAJ,QAAQ,CAAC,iBAAD,EAAoB,MAAM;AAC9BG,EAAAA,UAAU,CAAC,MAAM;AACZN,IAAAA,SAAS,CAACQ,QAAX,CAAkCC,SAAlC;AACH,GAFS,CAAV;AAGAN,EAAAA,QAAQ,CAAC,WAAD,EAAc,MAAM;AACxBC,IAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAY;AAGnC,YAAMM,eAAe,GAAG,IAAIT,eAAJ,EAAxB;AACA,YAAMU,IAAI,GAAGT,IAAI,CAACU,EAAL,CAAQ,MAAM;AACvB,eAAO;AACHC,UAAAA,GAAG,EAAE,iBADF;AAEHC,UAAAA,QAAQ,EAAE,cAFP;AAGHC,UAAAA,KAAK,EAAE,kBAHJ;AAIHC,UAAAA,QAAQ,EAAE;AAJP,SAAP;AAMH,OAPY,CAAb;AAQChB,MAAAA,SAAD,CAAwCiB,kBAAxC,CAA2D,MAAM;AAC7D,eAAO;AACHN,UAAAA;AADG,SAAP;AAGH,OAJD;AAMA,YAAMO,MAAM,GAAG,MAAMR,eAAe,CAACS,OAAhB,CAAwB;AACzCC,QAAAA,IAAI,EAAE;AACFN,UAAAA,QAAQ,EAAE,cADR;AAEFC,UAAAA,KAAK,EAAE,kBAFL;AAGFC,UAAAA,QAAQ,EAAE;AAHR;AADmC,OAAxB,CAArB;AAQAX,MAAAA,MAAM,CAACL,SAAD,CAAN,CAAkBqB,oBAAlB,CAAuC;AACnCP,QAAAA,QAAQ,EAAE,cADyB;AAEnCC,QAAAA,KAAK,EAAE,kBAF4B;AAGnCC,QAAAA,QAAQ,EAAE;AAHyB,OAAvC;AAKAX,MAAAA,MAAM,CAACM,IAAD,CAAN,CAAaW,gBAAb;AACAjB,MAAAA,MAAM,CAACM,IAAD,CAAN,CAAaY,cAAb;AACAlB,MAAAA,MAAM,CAACa,MAAD,CAAN,CAAeM,OAAf,CAAuB;AACnBX,QAAAA,GAAG,EAAE,iBADc;AAEnBC,QAAAA,QAAQ,EAAE,cAFS;AAGnBC,QAAAA,KAAK,EAAE,kBAHY;AAInBC,QAAAA,QAAQ,EAAE;AAJS,OAAvB;AAMH,KAvCC,CAAF;AAwCH,GAzCO,CAAR;AA0CH,CA9CO,CAAR","sourcesContent":["import UserModel from '../../models/userModel.js';\r\nimport ProductModel from '../../models/productModel.js';\r\n// import UserNotFound from '../../errors/UserNotFound';\r\n// import ProductNotFound from '../../errors/ProductNotFound';\r\nimport { AdminController } from './adminController.js';\r\n// import { UserController } from '../users/usersController';\r\n// import { ProductsController } from '../products/productsController.js';\r\nimport { jest, describe, it, expect, beforeEach } from '@jest/globals';\r\nimport { Request } from 'express';\r\n\r\njest.mock('../../models/userModel.js');\r\n// jest.mock('../../models/productModel.ts');\r\n\r\ndescribe('adminController', () => {\r\n    beforeEach(() => {\r\n        (UserModel.findById as jest.Mock).mockClear();\r\n    })\r\n    describe('addUser()', () => {\r\n        it('it should add a user', async () => {\r\n\r\n            //GIVEN\r\n            const adminController = new AdminController();\r\n            const save = jest.fn(() => {\r\n                return {\r\n                    _id: 'some id addUser',\r\n                    username: 'test addUser',\r\n                    email: 'test@addUser.com',\r\n                    password: 'test password'\r\n                }\r\n            });\r\n            (UserModel as jest.MockedFunction<any>).mockImplementation(() => {\r\n                return {\r\n                    save\r\n                }\r\n            })\r\n            //WHEN\r\n            const result = await adminController.addUser({\r\n                body: {\r\n                    username: 'test addUser',\r\n                    email: 'test@addUser.com',\r\n                    password: 'test password'\r\n                }\r\n            } as Request<{ username: string, email: string, password: string }>)\r\n            //THEN\r\n            expect(UserModel).toHaveBeenCalledWith({\r\n                username: 'test addUser',\r\n                email: 'test@addUser.com',\r\n                password: 'test password'\r\n            });\r\n            expect(save).toHaveBeenCalled();\r\n            expect(save).toHaveReturned();\r\n            expect(result).toEqual({\r\n                _id: 'some id addUser',\r\n                username: 'test addUser',\r\n                email: 'test@addUser.com',\r\n                password: 'test password'\r\n            });\r\n        })\r\n    })\r\n})"],"file":"adminController.spec.js"}