{"version":3,"sources":["../../src/middlewares/Auth.ts"],"names":["dotenv","jwt","config","ACCESS_TOKEN_SECRET","process","env","Middlewares","isAuth","req","res","next","token","cookies","verify","redirect","isNotAuth"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AAEAD,MAAM,CAACE,MAAP;AAKA,MAAM;AAAEC,EAAAA;AAAF,IAA0BC,OAAO,CAACC,GAAxC;AACA,OAAO,MAAMC,WAAN,CAAkB;AAEvBC,EAAAA,MAAM,CAACC,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACnG,UAAM;AAAEC,MAAAA;AAAF,QAAYH,GAAG,CAACI,OAAtB;;AACE,QAAID,KAAK,IAAIV,GAAG,CAACY,MAAJ,CAAWF,KAAX,EAAkBR,mBAAlB,CAAb,EAAqD;AACnD,aAAOO,IAAI,EAAX;AACD;;AACHD,IAAAA,GAAG,CAACK,QAAJ,CAAa,aAAb;AACD;;AACDC,EAAAA,SAAS,CAACP,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACtG,UAAM;AAAEC,MAAAA;AAAF,QAAYH,GAAG,CAACI,OAAtB;;AACE,QAAI,CAACD,KAAL,EAAY;AACV,aAAOD,IAAI,EAAX;AACD;AACJ;;AAdsB","sourcesContent":["import dotenv from 'dotenv';\nimport jwt from 'jsonwebtoken';\nimport { Response, Request, NextFunction } from 'express';\ndotenv.config();\n\ninterface ProcessEnv {\n  [key: string]: string\n}\nconst { ACCESS_TOKEN_SECRET } = process.env as ProcessEnv\nexport class Middlewares {\n\n  isAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\n    const { token } = req.cookies;   \n      if (token && jwt.verify(token, ACCESS_TOKEN_SECRET)) {\n        return next();\n      }    \n    res.redirect('/user/login');\n  }\n  isNotAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\n    const { token } = req.cookies;   \n      if (!token) {\n        return next();      \n      }    \n  }\n\n}\n\n\n"],"file":"Auth.js"}