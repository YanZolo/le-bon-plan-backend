{"version":3,"sources":["../../src/middlewares/Auth.ts"],"names":["dotenv","jwt","config","ACCESS_TOKEN_SECRET","process","env","Middlewares","isAuth","req","res","next","token","cookies","verify","redirect","isNotAuth"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,GAAP,MAAgB,cAAhB;AAEAD,MAAM,CAACE,MAAP;AAKA,MAAM;AAAEC,EAAAA;AAAF,IAA0BC,OAAO,CAACC,GAAxC;AACA,OAAO,MAAMC,WAAN,CAAkB;AAEvBC,EAAAA,MAAM,CAACC,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACnG,UAAM;AAAEC,MAAAA;AAAF,QAAYH,GAAG,CAACI,OAAtB;;AACE,QAAID,KAAK,IAAIV,GAAG,CAACY,MAAJ,CAAWF,KAAX,EAAkBR,mBAAlB,CAAb,EAAqD;AACnD,aAAOO,IAAI,EAAX;AACD;;AACHD,IAAAA,GAAG,CAACK,QAAJ,CAAa,aAAb;AACD;;AACDC,EAAAA,SAAS,CAACP,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACtG,UAAM;AAAEC,MAAAA;AAAF,QAAYH,GAAG,CAACI,OAAtB;;AACE,QAAI,CAACD,KAAL,EAAY;AACV,aAAOD,IAAI,EAAX;AACD;AACJ;;AAdsB","sourcesContent":["import dotenv from 'dotenv';\r\nimport jwt from 'jsonwebtoken';\r\nimport { Response, Request, NextFunction } from 'express';\r\ndotenv.config();\r\n\r\ninterface ProcessEnv {\r\n  [key: string]: string\r\n}\r\nconst { ACCESS_TOKEN_SECRET } = process.env as ProcessEnv\r\nexport class Middlewares {\r\n\r\n  isAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\r\n    const { token } = req.cookies;   \r\n      if (token && jwt.verify(token, ACCESS_TOKEN_SECRET)) {\r\n        return next();\r\n      }    \r\n    res.redirect('/user/login');\r\n  }\r\n  isNotAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\r\n    const { token } = req.cookies;   \r\n      if (!token) {\r\n        return next();      \r\n      }    \r\n  }\r\n\r\n}\r\n\r\n\r\n"],"file":"Auth.js"}