{"version":3,"sources":["../../src/middlewares/Auth.ts"],"names":["dotenv","config","ACCESS_TOKEN_SECRET","process","env","Middlewares","isAuth","req","res","next","token","headers","cookie","split","console","log","redirect","isNotAuth"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AAGAA,MAAM,CAACC,MAAP;AAKA,MAAM;AAAEC,EAAAA;AAAF,IAA0BC,OAAO,CAACC,GAAxC;AACA,OAAO,MAAMC,WAAN,CAAkB;AAEvBC,EAAAA,MAAM,CAACC,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACnG,UAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,MAAZ,IAAsBL,GAAG,CAACI,OAAJ,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAApC;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BR,GAAG,CAACI,OAAJ,CAAYC,MAAvC;;AACA,QAAG,CAACF,KAAJ,EAAU;AACR,aAAOF,GAAG,CAACQ,QAAJ,CAAa,cAAb,CAAP;AACD;;AACD,WAAOP,IAAI,EAAX;AAKD;;AACDQ,EAAAA,SAAS,CAACV,GAAD,EAAsDC,GAAtD,EAAqEC,IAArE,EAA+F;AACtG,UAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,MAAZ,IAAsBL,GAAG,CAACI,OAAJ,CAAYC,MAAZ,CAAmBC,KAAnB,CAAyB,GAAzB,EAA8B,CAA9B,CAApC;;AACE,QAAI,CAACH,KAAL,EAAY;AACV,aAAOD,IAAI,EAAX;AACD;AAEJ;;AApBsB","sourcesContent":["import dotenv from 'dotenv';\r\nimport jwt from 'jsonwebtoken';\r\nimport { Response, Request, NextFunction } from 'express';\r\ndotenv.config();\r\n\r\ninterface ProcessEnv {\r\n  [key: string]: string\r\n}\r\nconst { ACCESS_TOKEN_SECRET } = process.env as ProcessEnv\r\nexport class Middlewares {\r\n\r\n  isAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\r\n    const token = req.headers.cookie && req.headers.cookie.split('=')[1];  \r\n    console.log('req.cookies', req.headers.cookie) \r\n    if(!token){\r\n      return res.redirect('/admin/login')\r\n    }\r\n    return next();\r\n    //   if (token && jwt.verify(token, ACCESS_TOKEN_SECRET)) {\r\n    //     return next();\r\n    //   }    \r\n    // res.redirect('/admin/login');\r\n  }\r\n  isNotAuth(req: Request<any, any, any, any, { token: string }>, res: Response, next: NextFunction): void {\r\n    const token = req.headers.cookie && req.headers.cookie.split('=')[1];    \r\n      if (!token) {\r\n        return next();      \r\n      }   \r\n      // maybe need to return something \r\n  }\r\n\r\n}\r\n\r\n\r\n"],"file":"Auth.js"}