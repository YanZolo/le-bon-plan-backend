{"version":3,"sources":["../src/index.d.ts"],"names":["dotenv","express","productRoutes","userRoutes","versionRoutes","startDB","path","fileURLToPath","app","url","process","env","DB_URL","__filename","import","meta","__dirname","dirname","config","disable","set","join","use","json","urlencoded","extended","get","req","res","render","send","connect","listen","PORT","console","log"],"mappings":"AAAA,MAAOA,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,OAAP,KAAwD,SAAxD,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,+BAAvB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,iBAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,MAAjB,CACA,OAASC,aAAT,KAA8B,KAA9B,CAEA,KAAMC,CAAAA,GAAiB,CAAGP,OAAO,EAAjC,CACA,KAAMQ,CAAAA,GAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,MAAxB,CAEA,KAAMC,CAAAA,UAAU,CAAGN,aAAa,CAACO,MAAM,CAACC,IAAP,CAAYN,GAAb,CAAhC,CACA,KAAMO,CAAAA,SAAS,CAAGV,IAAI,CAACW,OAAL,CAAaJ,UAAb,CAAlB,CACAb,MAAM,CAACkB,MAAP,GAEAV,GAAG,CAACW,OAAJ,CAAY,cAAZ,EACAX,GAAG,CAACY,GAAJ,CAAQ,aAAR,CAAuB,KAAvB,EACAZ,GAAG,CAACY,GAAJ,CAAQ,OAAR,CAAiBd,IAAI,CAACe,IAAL,CAAUL,SAAV,CAAqB,IAArB,CAA2B,OAA3B,CAAjB,EAEAR,GAAG,CAACc,GAAJ,CAAQrB,OAAO,CAACsB,IAAR,EAAR,EACAf,GAAG,CAACc,GAAJ,CAAQrB,OAAO,CAACuB,UAAR,CAAmB,CAAEC,QAAQ,CAAE,IAAZ,CAAnB,CAAR,EACAjB,GAAG,CAACc,GAAJ,CAAQ,GAAR,CAAalB,aAAb,EACAI,GAAG,CAACc,GAAJ,CAAQ,UAAR,CAAoBpB,aAApB,EACAM,GAAG,CAACc,GAAJ,CAAQ,OAAR,CAAiBnB,UAAjB,EAEAK,GAAG,CAACkB,GAAJ,CAAQ,GAAR,CAAa,CAACC,GAAD,CAAMC,GAAN,GAAc,CACzBA,GAAG,CAACC,MAAJ,CAAW,OAAX,CACD,CAFD,EAGArB,GAAG,CAACkB,GAAJ,CAAQ,SAAR,CAAmB,CAACC,GAAD,CAAMC,GAAN,GAAc,CAC/BA,GAAG,CAACE,IAAJ,CAAS,IAAT,CACD,CAFD,EAIA,KAAMC,CAAAA,OAAO,CAAG,SAAY,CAC1B,KAAM1B,CAAAA,OAAO,CAACI,GAAD,CAAb,CACAD,GAAG,CAACwB,MAAJ,CAAWtB,OAAO,CAACC,GAAR,CAAYsB,IAAvB,CAA6B,IAAM,CACjCC,OAAO,CAACC,GAAR,CAAa,0BAAyBzB,OAAO,CAACC,GAAR,CAAYsB,IAAK,EAAvD,CACD,CAFD,CAGD,CALD,CAOAF,OAAO","sourcesContent":["import dotenv from 'dotenv';\r\nimport express, { Application , Request, Response} from 'express';\r\nimport productRoutes from './controllers/products/routes.js';\r\nimport userRoutes from './controllers/users/routes.js';\r\nimport versionRoutes from './controllers/version/routes.js';\r\nimport startDB from './db/connect.js';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport { NodePath } from '@babel/core';\r\nconst app : Application = express();\r\nconst url = process.env.DB_URL;\r\n// code below because __dirname is not suported with esm\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\ndotenv.config();\r\n\r\napp.disable('x-powered-by'); //Disable this header, to prevent attacks. (use helmet will be a best protection)\r\napp.set('view engine', 'ejs');\r\napp.set('views', path.join(__dirname, '..', 'views'));\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use('/', versionRoutes);\r\napp.use('/product', productRoutes);\r\napp.use('/user', userRoutes);\r\n\r\napp.get('/', (req, res) => {\r\n  res.render('login');\r\n});\r\napp.get('/health', (req, res) => {\r\n  res.send('ok');\r\n});\r\n\r\nconst connect = async () => {\r\n  await startDB(url);\r\n  app.listen(process.env.PORT, () => {\r\n    console.log(`server started at port ${process.env.PORT}`);\r\n  });\r\n};\r\n\r\nconnect();\r\n"],"file":"index.d.js"}