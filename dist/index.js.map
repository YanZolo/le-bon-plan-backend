{"version":3,"sources":["../src/index.ts"],"names":["dotenv","express","productRoutes","userRoutes","versionRoutes","startDB","path","fileURLToPath","app","url","process","env","DB_URL","__filename","import","meta","__dirname","dirname","config","disable","set","join","use","json","urlencoded","extended","get","req","res","render","send","connect","listen","PORT","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,OAAP,MAAwD,SAAxD;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,aAAT,QAA8B,KAA9B;AAEA,MAAMC,GAAgB,GAAGP,OAAO,EAAhC;AACA,MAAMQ,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,MAAxB;;AAEA,MAAMC,UAAU,GAAGN,aAAa,CAACO,MAAM,CAACC,IAAP,CAAYN,GAAb,CAAhC;;AACA,MAAMO,SAAS,GAAGV,IAAI,CAACW,OAAL,CAAaJ,UAAb,CAAlB;;AACAb,MAAM,CAACkB,MAAP;AAEAV,GAAG,CAACW,OAAJ,CAAY,cAAZ;AACAX,GAAG,CAACY,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAZ,GAAG,CAACY,GAAJ,CAAQ,OAAR,EAAiBd,IAAI,CAACe,IAAL,CAAUL,SAAV,EAAqB,IAArB,EAA2B,OAA3B,CAAjB;AAEAR,GAAG,CAACc,GAAJ,CAAQrB,OAAO,CAACsB,IAAR,EAAR;AACAf,GAAG,CAACc,GAAJ,CAAQrB,OAAO,CAACuB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAjB,GAAG,CAACc,GAAJ,CAAQ,GAAR,EAAalB,aAAb;AACAI,GAAG,CAACc,GAAJ,CAAQ,UAAR,EAAoBpB,aAApB;AACAM,GAAG,CAACc,GAAJ,CAAQ,OAAR,EAAiBnB,UAAjB;AAEAK,GAAG,CAACkB,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACD,CAFD;AAGArB,GAAG,CAACkB,GAAJ,CAAQ,SAAR,EAAmB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC/BA,EAAAA,GAAG,CAACE,IAAJ,CAAS,IAAT;AACD,CAFD;;AAIA,MAAMC,OAAO,GAAG,YAAY;AAC1B,QAAM1B,OAAO,CAACI,GAAD,CAAb;AACAD,EAAAA,GAAG,CAACwB,MAAJ,CAAWtB,OAAO,CAACC,GAAR,CAAYsB,IAAvB,EAA6B,MAAM;AACjCC,IAAAA,OAAO,CAACC,GAAR,CAAa,0BAAyBzB,OAAO,CAACC,GAAR,CAAYsB,IAAK,EAAvD;AACD,GAFD;AAGD,CALD;;AAOAF,OAAO","sourcesContent":["import dotenv from 'dotenv';\r\nimport express, { Application, Request, Response } from 'express';\r\nimport productRoutes from './controllers/products/routes.js';\r\nimport userRoutes from './controllers/users/routes.js';\r\nimport versionRoutes from './controllers/version/routes.js';\r\nimport startDB from './db/connect.js';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport { NodePath } from '@babel/core';\r\nconst app: Application = express();\r\nconst url = process.env.DB_URL;\r\n// code below because __dirname is not suported with esm\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\ndotenv.config();\r\n\r\napp.disable('x-powered-by'); //Disable this header, to prevent attacks. (use helmet will be a best protection)\r\napp.set('view engine', 'ejs');\r\napp.set('views', path.join(__dirname, '..', 'views'));\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use('/', versionRoutes);\r\napp.use('/product', productRoutes);\r\napp.use('/user', userRoutes);\r\n\r\napp.get('/', (req, res) => {\r\n  res.render('login');\r\n});\r\napp.get('/health', (req, res) => {\r\n  res.send('ok');\r\n});\r\n\r\nconst connect = async () => {\r\n  await startDB(url);\r\n  app.listen(process.env.PORT, () => {\r\n    console.log(`server started at port ${process.env.PORT}`);\r\n  });\r\n};\r\n\r\nconnect();\r\n"],"file":"index.js"}