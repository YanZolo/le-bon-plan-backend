{"version":3,"sources":["../src/index.ts"],"names":["dotenv","express","productRoutes","userRoutes","versionRoutes","startDB","path","fileURLToPath","app","url","process","env","DB_URL","__filename","import","meta","__dirname","dirname","config","PORT","disable","set","join","use","json","urlencoded","extended","get","req","res","render","send","connect","listen","console","log"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AACA,OAAOC,OAAP,MAAyD,SAAzD;AACA,OAAOC,aAAP,MAA0B,kCAA1B;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,aAAT,QAA8B,KAA9B;AACA,MAAMC,GAAiB,GAAGP,OAAO,EAAjC;AACA,MAAMQ,GAAuB,GAAGC,OAAO,CAACC,GAAR,CAAYC,MAA5C;;AAEA,MAAMC,UAAmB,GAAGN,aAAa,CAACO,MAAM,CAACC,IAAP,CAAYN,GAAb,CAAzC;;AACA,MAAMO,SAAkB,GAAGV,IAAI,CAACW,OAAL,CAAaJ,UAAb,CAA3B;;AACAb,MAAM,CAACkB,MAAP;AACA,MAAMC,IAAyB,GAAGT,OAAO,CAACC,GAAR,CAAYQ,IAA9C;AAEAX,GAAG,CAACY,OAAJ,CAAY,cAAZ;AACAZ,GAAG,CAACa,GAAJ,CAAQ,aAAR,EAAuB,KAAvB;AACAb,GAAG,CAACa,GAAJ,CAAQ,OAAR,EAAiBf,IAAI,CAACgB,IAAL,CAAUN,SAAV,EAAqB,IAArB,EAA2B,OAA3B,CAAjB;AAEAR,GAAG,CAACe,GAAJ,CAAQtB,OAAO,CAACuB,IAAR,EAAR;AACAhB,GAAG,CAACe,GAAJ,CAAQtB,OAAO,CAACwB,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAlB,GAAG,CAACe,GAAJ,CAAQ,GAAR,EAAanB,aAAb;AACAI,GAAG,CAACe,GAAJ,CAAQ,UAAR,EAAoBrB,aAApB;AACAM,GAAG,CAACe,GAAJ,CAAQ,OAAR,EAAiBpB,UAAjB;AAEAK,GAAG,CAACmB,GAAJ,CAAQ,GAAR,EAAa,CAACC,GAAD,EAAgBC,GAAhB,KAAmC;AAC9CA,EAAAA,GAAG,CAACC,MAAJ,CAAW,OAAX;AACD,CAFD;AAGAtB,GAAG,CAACmB,GAAJ,CAAQ,SAAR,EAAmB,CAACC,GAAD,EAAMC,GAAN,KAAc;AAC/BA,EAAAA,GAAG,CAACE,IAAJ,CAAS,IAAT;AACD,CAFD;;AAIA,MAAMC,OAAO,GAAG,YAAY;AAC1B,QAAM3B,OAAO,CAACI,GAAD,CAAb;AACAD,EAAAA,GAAG,CAACyB,MAAJ,CAAWd,IAAX,EAAiB,MAAM;AACrBe,IAAAA,OAAO,CAACC,GAAR,CAAa,0BAAyBhB,IAAK,EAA3C;AACD,GAFD;AAGD,CALD;;AAOAa,OAAO","sourcesContent":["import dotenv from 'dotenv';\r\nimport express , { Application, Request, Response } from 'express';\r\nimport productRoutes from './controllers/products/routes.js';\r\nimport userRoutes from './controllers/users/routes.js';\r\nimport versionRoutes from './controllers/version/routes.js';\r\nimport startDB from './db/connect.js';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nconst app : Application = express();\r\nconst url: string | undefined = process.env.DB_URL;\r\n// code below because __dirname is not suported with esm\r\nconst __filename : string = fileURLToPath(import.meta.url);\r\nconst __dirname : string = path.dirname(__filename);\r\ndotenv.config();\r\nconst PORT : string | undefined = process.env.PORT\r\n\r\napp.disable('x-powered-by'); //Disable this header, to prevent attacks. (use helmet will be a best protection)\r\napp.set('view engine', 'ejs');\r\napp.set('views', path.join(__dirname, '..', 'views'));\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use('/', versionRoutes);\r\napp.use('/product', productRoutes);\r\napp.use('/user', userRoutes);\r\n\r\napp.get('/', (req : Request, res: Response)  => {\r\n  res.render('login');\r\n});\r\napp.get('/health', (req, res) => {\r\n  res.send('ok');\r\n});\r\n\r\nconst connect = async () => {\r\n  await startDB(url);\r\n  app.listen(PORT, () => {\r\n    console.log(`server started at port ${PORT}`);\r\n  });\r\n};\r\n\r\nconnect();\r\n"],"file":"index.js"}